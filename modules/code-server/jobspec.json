{
    "Job": {
        "ID": "code-server",
        "Name": "Code Server",
        "TaskGroups": [
            {
                "Name": "Code Server",
                "Tasks": [
                    {
                        "Driver": "docker",
                        "Name": "code-server",
                        "Count": 1,
                        "Config": {
                            "image": "codercom/code-server:latest",
                            "ports": [
                                "web"
                            ],
                            "volumes": [
                                ".local:/home/coder/.local",
                                ".config:/home/coder/.config"
                            ]
                        },
                        "Resources": {
                            "CPU": 1000,
                            "MemoryMB": 1024
                        }
                    }
                ],
                "Services": [
                    {
                        "Name": "code-server",
                        "Provider": "nomad",
                        "PortLabel": "web",
                        "Tags": [
                            "traefik.enable=true",
                            "traefik.http.routers.code-server.entrypoints=websecure",
                            "traefik.http.routers.code-server.rule=Host(`code.brmartin.co.uk`)"
                        ]
                    }
                ],
                "Networks": [
                    {
                        "DynamicPorts": [
                            {
                                "Label": "web",
                                "To": 8080
                            }
                        ]
                    }
                ]
            }
        ]
    }
}