name: Terraform Deploy

on:
  workflow_run:
    workflows: ["Terraform Plan"]
    types:
      - completed
    branches:
      - main

env:
  TF_IN_AUTOMATION: true
  TF_CLI_ARGS: "-no-color"

jobs:
  apply:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: hashicorp/setup-terraform@v3
      - name: Terraform apply
        id: apply
        run: terraform apply -auto-approve tfplan
